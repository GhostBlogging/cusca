{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/@vibrant/color/lib/index.js","webpack:///../node_modules/@vibrant/color/lib/converter.js","webpack:///../node_modules/node-vibrant/lib/pipeline/index.worker.js","webpack:///../node_modules/@vibrant/core/lib/pipeline/worker/host.js","webpack:///../node_modules/@vibrant/worker/lib/worker.js","webpack:///../node_modules/node-vibrant/lib/pipeline/index.js","webpack:///../node_modules/@vibrant/quantizer-mmcq/lib/index.js","webpack:///../node_modules/@vibrant/quantizer-mmcq/lib/vbox.js","webpack:///../node_modules/@vibrant/image/lib/histogram.js","webpack:///../node_modules/@vibrant/quantizer-mmcq/lib/pqueue.js","webpack:///../node_modules/@vibrant/generator-default/lib/index.js","webpack:///../node_modules/@vibrant/core/lib/pipeline/index.js","webpack:///../node_modules/@vibrant/image/lib/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","converter_1","Swatch","rgb","population","this","_rgb","_population","applyFilters","colors","filters","length","filter","_a","g","b","j","clone","swatch","configurable","_hsl","rgbToHsl","_hex","rgbToHex","toJSON","getRgb","getHsl","hsl","getPopulation","getHex","hex","getYiq","_yiq","_titleTextColor","_bodyTextColor","getTitleTextColor","titleTextColor","getBodyTextColor","bodyTextColor","hexToRgb","exec","RangeError","map","parseInt","rgbToXyz","Math","pow","xyzToCIELab","x","y","z","rgbToCIELab","deltaE94","lab1","lab2","L1","a1","b1","L2","a2","b2","dL","da","db","xC1","sqrt","xDL","xDC","xDE","xDH","abs","rgbDiff","rgb1","rgb2","apply","undefined","DELTAE94_DIFF_STATUS","NA","PERFECT","CLOSE","GOOD","SIMILAR","toString","slice","max","min","h","hslToRgb","hue2rgb","q","hexDiff","hex1","hex2","getColorDiffStatus","host_1","_1","default","self","worker_1","pipeline","imageData","opts","process","fn","onmessage","event","data","id","payload","Promise","resolve","then","ret","postMessage","type","catch","e","message","quantizer_mmcq_1","generator_default_1","BasicPipeline","register","a","quantizer","generator","color_1","vbox_1","pqueue_1","_splitBoxes","pq","target","lastSize","size","vbox","pop","count","split","vbox1","vbox2","push","pixels","colorCount","Error","build","histogram","pq2","volume","contents","swatches","v","color","avg","generateSwatches","histogram_1","VBox","r1","r2","g1","g2","_volume","_count","dimension","sigBits","rmin","rmax","gmin","gmax","bmin","bmax","invalidate","_avg","hist","getColorIndex","_b","ntot","rsum","gsum","bsum","contains","sum","total","rw","gw","bw","maxw","accSum","maxd","Uint32Array","splitPoint","reverseSum","dim1","dim2","d1","d2","left","right","c2","doCut","Histogram","rshift","Number","MAX_VALUE","offset","_colorCount","reduce","PQueue","comparator","_comparator","_sorted","_sort","sort","item","peek","index","mapper","DefaultOpts","targetDarkLuma","maxDarkLuma","minLightLuma","targetLightLuma","minNormalLuma","targetNormalLuma","maxNormalLuma","targetMutesSaturation","maxMutesSaturation","targetVibrantSaturation","minVibrantSaturation","weightSaturation","weightLuma","weightPopulation","_findColorVariation","palette","maxPopulation","targetLuma","minLuma","maxLuma","targetSaturation","minSaturation","maxSaturation","maxValue","forEach","Vibrant","DarkVibrant","LightVibrant","Muted","DarkMuted","LightMuted","_isAlreadySelected","saturation","luma","invertDiff","targetValue","values","_i","arguments","weightSum","weight","weightedMean","_createComparisonValue","assign","_findMaxPopulation","_generateVariationColors","_c","_d","_e","_f","_g","_h","_j","_generateEmptySwatches","__awaiter","thisArg","_arguments","P","reject","fulfilled","step","next","rejected","result","done","__generator","body","f","_","label","sent","trys","ops","verb","iterator","op","TypeError","image_1","Stage","_map","names","keys","has","stageFn","_buildProcessTasks","_this","generators","createTask","stage","options","imageFilterData","palettes","_filterColors","_generateColors","_generatePalettes","promiseArr","all","promises","promiseVal","ImageBase","scaleDown","width","getWidth","height","getHeight","ratio","maxDimension","maxSide","quality","resize"],"mappings":"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","file":"4847708f17577bcdf374.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar converter_1 = require(\"./converter\");\nvar Swatch = /** @class */ (function () {\n    function Swatch(rgb, population) {\n        this._rgb = rgb;\n        this._population = population;\n    }\n    Swatch.applyFilters = function (colors, filters) {\n        return filters.length > 0\n            ? colors.filter(function (_a) {\n                var r = _a.r, g = _a.g, b = _a.b;\n                for (var j = 0; j < filters.length; j++) {\n                    if (!filters[j](r, g, b, 255))\n                        return false;\n                }\n                return true;\n            })\n            : colors;\n    };\n    Swatch.clone = function (swatch) {\n        return new Swatch(swatch._rgb, swatch._population);\n    };\n    Object.defineProperty(Swatch.prototype, \"r\", {\n        get: function () {\n            return this._rgb[0];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"g\", {\n        get: function () {\n            return this._rgb[1];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"b\", {\n        get: function () {\n            return this._rgb[2];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"rgb\", {\n        get: function () {\n            return this._rgb;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"hsl\", {\n        get: function () {\n            if (!this._hsl) {\n                var _a = this._rgb, r = _a[0], g = _a[1], b = _a[2];\n                this._hsl = converter_1.rgbToHsl(r, g, b);\n            }\n            return this._hsl;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"hex\", {\n        get: function () {\n            if (!this._hex) {\n                var _a = this._rgb, r = _a[0], g = _a[1], b = _a[2];\n                this._hex = converter_1.rgbToHex(r, g, b);\n            }\n            return this._hex;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"population\", {\n        get: function () {\n            return this._population;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Swatch.prototype.toJSON = function () {\n        return {\n            rgb: this.rgb,\n            population: this.population\n        };\n    };\n    // TODO: deprecate internally, use property instead\n    Swatch.prototype.getRgb = function () {\n        return this._rgb;\n    };\n    // TODO: deprecate internally, use property instead\n    Swatch.prototype.getHsl = function () {\n        return this.hsl;\n    };\n    // TODO: deprecate internally, use property instead\n    Swatch.prototype.getPopulation = function () {\n        return this._population;\n    };\n    // TODO: deprecate internally, use property instead\n    Swatch.prototype.getHex = function () {\n        return this.hex;\n    };\n    Swatch.prototype.getYiq = function () {\n        if (!this._yiq) {\n            var rgb = this._rgb;\n            this._yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n        }\n        return this._yiq;\n    };\n    Object.defineProperty(Swatch.prototype, \"titleTextColor\", {\n        get: function () {\n            if (this._titleTextColor) {\n                this._titleTextColor = this.getYiq() < 200 ? '#fff' : '#000';\n            }\n            return this._titleTextColor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Swatch.prototype, \"bodyTextColor\", {\n        get: function () {\n            if (this._bodyTextColor) {\n                this._bodyTextColor = this.getYiq() < 150 ? '#fff' : '#000';\n            }\n            return this._bodyTextColor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Swatch.prototype.getTitleTextColor = function () {\n        return this.titleTextColor;\n    };\n    Swatch.prototype.getBodyTextColor = function () {\n        return this.bodyTextColor;\n    };\n    return Swatch;\n}());\nexports.Swatch = Swatch;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DELTAE94_DIFF_STATUS = {\n    NA: 0,\n    PERFECT: 1,\n    CLOSE: 2,\n    GOOD: 10,\n    SIMILAR: 50\n};\nfunction hexToRgb(hex) {\n    var m = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (!m)\n        throw new RangeError(\"'\" + hex + \"' is not a valid hex color\");\n    return [m[1], m[2], m[3]].map(function (s) { return parseInt(s, 16); });\n}\nexports.hexToRgb = hexToRgb;\nfunction rgbToHex(r, g, b) {\n    return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7);\n}\nexports.rgbToHex = rgbToHex;\nfunction rgbToHsl(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h = 0;\n    var s = 0;\n    var l = (max + min) / 2;\n    if (max !== min) {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n            case r:\n                h = (g - b) / d + (g < b ? 6 : 0);\n                break;\n            case g:\n                h = (b - r) / d + 2;\n                break;\n            case b:\n                h = (r - g) / d + 4;\n                break;\n        }\n        h /= 6;\n    }\n    return [h, s, l];\n}\nexports.rgbToHsl = rgbToHsl;\nfunction hslToRgb(h, s, l) {\n    var r;\n    var g;\n    var b;\n    function hue2rgb(p, q, t) {\n        if (t < 0)\n            t += 1;\n        if (t > 1)\n            t -= 1;\n        if (t < 1 / 6)\n            return p + (q - p) * 6 * t;\n        if (t < 1 / 2)\n            return q;\n        if (t < 2 / 3)\n            return p + (q - p) * (2 / 3 - t) * 6;\n        return p;\n    }\n    if (s === 0) {\n        r = g = b = l;\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - (l * s);\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - (1 / 3));\n    }\n    return [\n        r * 255,\n        g * 255,\n        b * 255\n    ];\n}\nexports.hslToRgb = hslToRgb;\nfunction rgbToXyz(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    r = r > 0.04045 ? Math.pow((r + 0.005) / 1.055, 2.4) : r / 12.92;\n    g = g > 0.04045 ? Math.pow((g + 0.005) / 1.055, 2.4) : g / 12.92;\n    b = b > 0.04045 ? Math.pow((b + 0.005) / 1.055, 2.4) : b / 12.92;\n    r *= 100;\n    g *= 100;\n    b *= 100;\n    var x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n    var y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n    var z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n    return [x, y, z];\n}\nexports.rgbToXyz = rgbToXyz;\nfunction xyzToCIELab(x, y, z) {\n    var REF_X = 95.047;\n    var REF_Y = 100;\n    var REF_Z = 108.883;\n    x /= REF_X;\n    y /= REF_Y;\n    z /= REF_Z;\n    x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n    y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n    z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n    var L = 116 * y - 16;\n    var a = 500 * (x - y);\n    var b = 200 * (y - z);\n    return [L, a, b];\n}\nexports.xyzToCIELab = xyzToCIELab;\nfunction rgbToCIELab(r, g, b) {\n    var _a = rgbToXyz(r, g, b), x = _a[0], y = _a[1], z = _a[2];\n    return xyzToCIELab(x, y, z);\n}\nexports.rgbToCIELab = rgbToCIELab;\nfunction deltaE94(lab1, lab2) {\n    var WEIGHT_L = 1;\n    var WEIGHT_C = 1;\n    var WEIGHT_H = 1;\n    var L1 = lab1[0], a1 = lab1[1], b1 = lab1[2];\n    var L2 = lab2[0], a2 = lab2[1], b2 = lab2[2];\n    var dL = L1 - L2;\n    var da = a1 - a2;\n    var db = b1 - b2;\n    var xC1 = Math.sqrt(a1 * a1 + b1 * b1);\n    var xC2 = Math.sqrt(a2 * a2 + b2 * b2);\n    var xDL = L2 - L1;\n    var xDC = xC2 - xC1;\n    var xDE = Math.sqrt(dL * dL + da * da + db * db);\n    var xDH = (Math.sqrt(xDE) > Math.sqrt(Math.abs(xDL)) + Math.sqrt(Math.abs(xDC)))\n        ? Math.sqrt(xDE * xDE - xDL * xDL - xDC * xDC)\n        : 0;\n    var xSC = 1 + 0.045 * xC1;\n    var xSH = 1 + 0.015 * xC1;\n    xDL /= WEIGHT_L;\n    xDC /= WEIGHT_C * xSC;\n    xDH /= WEIGHT_H * xSH;\n    return Math.sqrt(xDL * xDL + xDC * xDC + xDH * xDH);\n}\nexports.deltaE94 = deltaE94;\nfunction rgbDiff(rgb1, rgb2) {\n    var lab1 = rgbToCIELab.apply(undefined, rgb1);\n    var lab2 = rgbToCIELab.apply(undefined, rgb2);\n    return deltaE94(lab1, lab2);\n}\nexports.rgbDiff = rgbDiff;\nfunction hexDiff(hex1, hex2) {\n    var rgb1 = hexToRgb(hex1);\n    var rgb2 = hexToRgb(hex2);\n    return rgbDiff(rgb1, rgb2);\n}\nexports.hexDiff = hexDiff;\nfunction getColorDiffStatus(d) {\n    if (d < exports.DELTAE94_DIFF_STATUS.NA) {\n        return 'N/A';\n    }\n    // Not perceptible by human eyes\n    if (d <= exports.DELTAE94_DIFF_STATUS.PERFECT) {\n        return 'Perfect';\n    }\n    // Perceptible through close observation\n    if (d <= exports.DELTAE94_DIFF_STATUS.CLOSE) {\n        return 'Close';\n    }\n    // Perceptible at a glance\n    if (d <= exports.DELTAE94_DIFF_STATUS.GOOD) {\n        return 'Good';\n    }\n    // Colors are more similar than opposite\n    if (d < exports.DELTAE94_DIFF_STATUS.SIMILAR) {\n        return 'Similar';\n    }\n    return 'Wrong';\n}\nexports.getColorDiffStatus = getColorDiffStatus;\n//# sourceMappingURL=converter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar host_1 = require(\"@vibrant/core/lib/pipeline/worker/host\");\nvar _1 = require(\"./\");\nhost_1.default(self, _1.default);\n//# sourceMappingURL=index.worker.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar worker_1 = require(\"@vibrant/worker/lib/worker\");\nfunction runPipelineInWorker(self, pipeline) {\n    worker_1.default(self, function (imageData, opts) {\n        return pipeline.process(imageData, opts);\n    });\n}\nexports.default = runPipelineInWorker;\n//# sourceMappingURL=host.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction runInWorker(self, fn) {\n    self.onmessage = function (event) {\n        var data = event.data;\n        var id = data.id, payload = data.payload;\n        var response;\n        Promise.resolve(fn.apply(void 0, payload))\n            .then(function (ret) {\n            self.postMessage({\n                id: id,\n                type: 'return',\n                payload: ret\n            });\n        })\n            .catch(function (e) {\n            self.postMessage({\n                id: id,\n                type: 'error',\n                payload: e.message\n            });\n        });\n    };\n}\nexports.default = runInWorker;\n//# sourceMappingURL=worker.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar quantizer_mmcq_1 = require(\"@vibrant/quantizer-mmcq\");\nvar generator_default_1 = require(\"@vibrant/generator-default\");\nvar pipeline_1 = require(\"@vibrant/core/lib/pipeline\");\nvar pipeline = new pipeline_1.BasicPipeline()\n    .filter.register('default', function (r, g, b, a) {\n    return a >= 125\n        && !(r > 250 && g > 250 && b > 250);\n})\n    .quantizer.register('mmcq', quantizer_mmcq_1.default)\n    .generator.register('default', generator_default_1.default);\nexports.default = pipeline;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar color_1 = require(\"@vibrant/color\");\nvar vbox_1 = require(\"./vbox\");\nvar pqueue_1 = require(\"./pqueue\");\nvar fractByPopulations = 0.75;\nfunction _splitBoxes(pq, target) {\n    var lastSize = pq.size();\n    while (pq.size() < target) {\n        var vbox = pq.pop();\n        if (vbox && vbox.count() > 0) {\n            var _a = vbox.split(), vbox1 = _a[0], vbox2 = _a[1];\n            pq.push(vbox1);\n            if (vbox2 && vbox2.count() > 0)\n                pq.push(vbox2);\n            // No more new boxes, converged\n            if (pq.size() === lastSize) {\n                break;\n            }\n            else {\n                lastSize = pq.size();\n            }\n        }\n        else {\n            break;\n        }\n    }\n}\nvar MMCQ = function (pixels, opts) {\n    if (pixels.length === 0 || opts.colorCount < 2 || opts.colorCount > 256) {\n        throw new Error('Wrong MMCQ parameters');\n    }\n    var vbox = vbox_1.default.build(pixels);\n    var colorCount = vbox.histogram.colorCount;\n    var pq = new pqueue_1.default(function (a, b) { return a.count() - b.count(); });\n    pq.push(vbox);\n    // first set of colors, sorted by population\n    _splitBoxes(pq, fractByPopulations * opts.colorCount);\n    // Re-order\n    var pq2 = new pqueue_1.default(function (a, b) { return a.count() * a.volume() - b.count() * b.volume(); });\n    pq2.contents = pq.contents;\n    // next set - generate the median cuts using the (npix * vol) sorting.\n    _splitBoxes(pq2, opts.colorCount - pq2.size());\n    // calculate the actual colors\n    return generateSwatches(pq2);\n};\nfunction generateSwatches(pq) {\n    var swatches = [];\n    while (pq.size()) {\n        var v = pq.pop();\n        var color = v.avg();\n        var r = color[0], g = color[1], b = color[2];\n        swatches.push(new color_1.Swatch(color, v.count()));\n    }\n    return swatches;\n}\nexports.default = MMCQ;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar histogram_1 = require(\"@vibrant/image/lib/histogram\");\nvar SIGBITS = 5;\nvar RSHIFT = 8 - SIGBITS;\nvar VBox = /** @class */ (function () {\n    function VBox(r1, r2, g1, g2, b1, b2, histogram) {\n        this.histogram = histogram;\n        this._volume = -1;\n        this._count = -1;\n        // NOTE: dimension will be mutated by split operation.\n        //       It must be specified explicitly, not from histogram\n        this.dimension = { r1: r1, r2: r2, g1: g1, g2: g2, b1: b1, b2: b2 };\n    }\n    VBox.build = function (pixels) {\n        var h = new histogram_1.default(pixels, { sigBits: SIGBITS });\n        var rmin = h.rmin, rmax = h.rmax, gmin = h.gmin, gmax = h.gmax, bmin = h.bmin, bmax = h.bmax;\n        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, h);\n    };\n    VBox.prototype.invalidate = function () {\n        this._volume = this._count = -1;\n        this._avg = null;\n    };\n    VBox.prototype.volume = function () {\n        if (this._volume < 0) {\n            var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\n            this._volume = (r2 - r1 + 1) * (g2 - g1 + 1) * (b2 - b1 + 1);\n        }\n        return this._volume;\n    };\n    VBox.prototype.count = function () {\n        if (this._count < 0) {\n            var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\n            var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\n            var c = 0;\n            for (var r = r1; r <= r2; r++) {\n                for (var g = g1; g <= g2; g++) {\n                    for (var b = b1; b <= b2; b++) {\n                        var index = getColorIndex(r, g, b);\n                        c += hist[index];\n                    }\n                }\n            }\n            this._count = c;\n        }\n        return this._count;\n    };\n    VBox.prototype.clone = function () {\n        var histogram = this.histogram;\n        var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\n        return new VBox(r1, r2, g1, g2, b1, b2, histogram);\n    };\n    VBox.prototype.avg = function () {\n        if (!this._avg) {\n            var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\n            var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\n            var ntot = 0;\n            var mult = 1 << (8 - SIGBITS);\n            var rsum = void 0;\n            var gsum = void 0;\n            var bsum = void 0;\n            rsum = gsum = bsum = 0;\n            for (var r = r1; r <= r2; r++) {\n                for (var g = g1; g <= g2; g++) {\n                    for (var b = b1; b <= b2; b++) {\n                        var index = getColorIndex(r, g, b);\n                        var h = hist[index];\n                        ntot += h;\n                        rsum += (h * (r + 0.5) * mult);\n                        gsum += (h * (g + 0.5) * mult);\n                        bsum += (h * (b + 0.5) * mult);\n                    }\n                }\n            }\n            if (ntot) {\n                this._avg = [\n                    ~~(rsum / ntot),\n                    ~~(gsum / ntot),\n                    ~~(bsum / ntot)\n                ];\n            }\n            else {\n                this._avg = [\n                    ~~(mult * (r1 + r2 + 1) / 2),\n                    ~~(mult * (g1 + g2 + 1) / 2),\n                    ~~(mult * (b1 + b2 + 1) / 2)\n                ];\n            }\n        }\n        return this._avg;\n    };\n    VBox.prototype.contains = function (rgb) {\n        var r = rgb[0], g = rgb[1], b = rgb[2];\n        var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\n        r >>= RSHIFT;\n        g >>= RSHIFT;\n        b >>= RSHIFT;\n        return r >= r1 && r <= r2\n            && g >= g1 && g <= g2\n            && b >= b1 && b <= b2;\n    };\n    VBox.prototype.split = function () {\n        var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\n        var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\n        var count = this.count();\n        if (!count)\n            return [];\n        if (count === 1)\n            return [this.clone()];\n        var rw = r2 - r1 + 1;\n        var gw = g2 - g1 + 1;\n        var bw = b2 - b1 + 1;\n        var maxw = Math.max(rw, gw, bw);\n        var accSum = null;\n        var sum;\n        var total;\n        sum = total = 0;\n        var maxd = null;\n        if (maxw === rw) {\n            maxd = 'r';\n            accSum = new Uint32Array(r2 + 1);\n            for (var r = r1; r <= r2; r++) {\n                sum = 0;\n                for (var g = g1; g <= g2; g++) {\n                    for (var b = b1; b <= b2; b++) {\n                        var index = getColorIndex(r, g, b);\n                        sum += hist[index];\n                    }\n                }\n                total += sum;\n                accSum[r] = total;\n            }\n        }\n        else if (maxw === gw) {\n            maxd = 'g';\n            accSum = new Uint32Array(g2 + 1);\n            for (var g = g1; g <= g2; g++) {\n                sum = 0;\n                for (var r = r1; r <= r2; r++) {\n                    for (var b = b1; b <= b2; b++) {\n                        var index = getColorIndex(r, g, b);\n                        sum += hist[index];\n                    }\n                }\n                total += sum;\n                accSum[g] = total;\n            }\n        }\n        else {\n            maxd = 'b';\n            accSum = new Uint32Array(b2 + 1);\n            for (var b = b1; b <= b2; b++) {\n                sum = 0;\n                for (var r = r1; r <= r2; r++) {\n                    for (var g = g1; g <= g2; g++) {\n                        var index = getColorIndex(r, g, b);\n                        sum += hist[index];\n                    }\n                }\n                total += sum;\n                accSum[b] = total;\n            }\n        }\n        var splitPoint = -1;\n        var reverseSum = new Uint32Array(accSum.length);\n        for (var i = 0; i < accSum.length; i++) {\n            var d = accSum[i];\n            if (splitPoint < 0 && d > total / 2)\n                splitPoint = i;\n            reverseSum[i] = total - d;\n        }\n        var vbox = this;\n        function doCut(d) {\n            var dim1 = d + '1';\n            var dim2 = d + '2';\n            var d1 = vbox.dimension[dim1];\n            var d2 = vbox.dimension[dim2];\n            var vbox1 = vbox.clone();\n            var vbox2 = vbox.clone();\n            var left = splitPoint - d1;\n            var right = d2 - splitPoint;\n            if (left <= right) {\n                d2 = Math.min(d2 - 1, ~~(splitPoint + right / 2));\n                d2 = Math.max(0, d2);\n            }\n            else {\n                d2 = Math.max(d1, ~~(splitPoint - 1 - left / 2));\n                d2 = Math.min(vbox.dimension[dim2], d2);\n            }\n            while (!accSum[d2])\n                d2++;\n            var c2 = reverseSum[d2];\n            while (!c2 && accSum[d2 - 1])\n                c2 = reverseSum[--d2];\n            vbox1.dimension[dim2] = d2;\n            vbox2.dimension[dim1] = d2 + 1;\n            return [vbox1, vbox2];\n        }\n        return doCut(maxd);\n    };\n    return VBox;\n}());\nexports.default = VBox;\n//# sourceMappingURL=vbox.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Histogram = /** @class */ (function () {\n    function Histogram(pixels, opts) {\n        this.pixels = pixels;\n        this.opts = opts;\n        var sigBits = opts.sigBits;\n        var getColorIndex = function (r, g, b) {\n            return (r << (2 * sigBits)) + (g << sigBits) + b;\n        };\n        this.getColorIndex = getColorIndex;\n        var rshift = 8 - sigBits;\n        var hn = 1 << (3 * sigBits);\n        var hist = new Uint32Array(hn);\n        var rmax;\n        var rmin;\n        var gmax;\n        var gmin;\n        var bmax;\n        var bmin;\n        var r;\n        var g;\n        var b;\n        var a;\n        rmax = gmax = bmax = 0;\n        rmin = gmin = bmin = Number.MAX_VALUE;\n        var n = pixels.length / 4;\n        var i = 0;\n        while (i < n) {\n            var offset = i * 4;\n            i++;\n            r = pixels[offset + 0];\n            g = pixels[offset + 1];\n            b = pixels[offset + 2];\n            a = pixels[offset + 3];\n            // Ignored pixels' alpha is marked as 0 in filtering stage\n            if (a === 0)\n                continue;\n            r = r >> rshift;\n            g = g >> rshift;\n            b = b >> rshift;\n            var index = getColorIndex(r, g, b);\n            hist[index] += 1;\n            if (r > rmax)\n                rmax = r;\n            if (r < rmin)\n                rmin = r;\n            if (g > gmax)\n                gmax = g;\n            if (g < gmin)\n                gmin = g;\n            if (b > bmax)\n                bmax = b;\n            if (b < bmin)\n                bmin = b;\n        }\n        this._colorCount = hist.reduce(function (total, c) { return c > 0 ? total + 1 : total; }, 0);\n        this.hist = hist;\n        this.rmax = rmax;\n        this.rmin = rmin;\n        this.gmax = gmax;\n        this.gmin = gmin;\n        this.bmax = bmax;\n        this.bmin = bmin;\n    }\n    Object.defineProperty(Histogram.prototype, \"colorCount\", {\n        get: function () { return this._colorCount; },\n        enumerable: true,\n        configurable: true\n    });\n    return Histogram;\n}());\nexports.default = Histogram;\n//# sourceMappingURL=histogram.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PQueue = /** @class */ (function () {\n    function PQueue(comparator) {\n        this._comparator = comparator;\n        this.contents = [];\n        this._sorted = false;\n    }\n    PQueue.prototype._sort = function () {\n        if (!this._sorted) {\n            this.contents.sort(this._comparator);\n            this._sorted = true;\n        }\n    };\n    PQueue.prototype.push = function (item) {\n        this.contents.push(item);\n        this._sorted = false;\n    };\n    PQueue.prototype.peek = function (index) {\n        this._sort();\n        index = typeof index === 'number' ? index : this.contents.length - 1;\n        return this.contents[index];\n    };\n    PQueue.prototype.pop = function () {\n        this._sort();\n        return this.contents.pop();\n    };\n    PQueue.prototype.size = function () {\n        return this.contents.length;\n    };\n    PQueue.prototype.map = function (mapper) {\n        this._sort();\n        return this.contents.map(mapper);\n    };\n    return PQueue;\n}());\nexports.default = PQueue;\n//# sourceMappingURL=pqueue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar color_1 = require(\"@vibrant/color\");\nvar converter_1 = require(\"@vibrant/color/lib/converter\");\nvar DefaultOpts = {\n    targetDarkLuma: 0.26,\n    maxDarkLuma: 0.45,\n    minLightLuma: 0.55,\n    targetLightLuma: 0.74,\n    minNormalLuma: 0.3,\n    targetNormalLuma: 0.5,\n    maxNormalLuma: 0.7,\n    targetMutesSaturation: 0.3,\n    maxMutesSaturation: 0.4,\n    targetVibrantSaturation: 1.0,\n    minVibrantSaturation: 0.35,\n    weightSaturation: 3,\n    weightLuma: 6.5,\n    weightPopulation: 0.5\n};\nfunction _findMaxPopulation(swatches) {\n    var p = 0;\n    swatches.forEach(function (s) {\n        p = Math.max(p, s.getPopulation());\n    });\n    return p;\n}\nfunction _isAlreadySelected(palette, s) {\n    return palette.Vibrant === s\n        || palette.DarkVibrant === s\n        || palette.LightVibrant === s\n        || palette.Muted === s\n        || palette.DarkMuted === s\n        || palette.LightMuted === s;\n}\nfunction _createComparisonValue(saturation, targetSaturation, luma, targetLuma, population, maxPopulation, opts) {\n    function weightedMean() {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            values[_i] = arguments[_i];\n        }\n        var sum = 0;\n        var weightSum = 0;\n        for (var i = 0; i < values.length; i += 2) {\n            var value = values[i];\n            var weight = values[i + 1];\n            sum += value * weight;\n            weightSum += weight;\n        }\n        return sum / weightSum;\n    }\n    function invertDiff(value, targetValue) {\n        return 1 - Math.abs(value - targetValue);\n    }\n    return weightedMean(invertDiff(saturation, targetSaturation), opts.weightSaturation, invertDiff(luma, targetLuma), opts.weightLuma, population / maxPopulation, opts.weightPopulation);\n}\nfunction _findColorVariation(palette, swatches, maxPopulation, targetLuma, minLuma, maxLuma, targetSaturation, minSaturation, maxSaturation, opts) {\n    var max = null;\n    var maxValue = 0;\n    swatches.forEach(function (swatch) {\n        var _a = swatch.getHsl(), s = _a[1], l = _a[2];\n        if (s >= minSaturation && s <= maxSaturation\n            && l >= minLuma && l <= maxLuma\n            && !_isAlreadySelected(palette, swatch)) {\n            var value = _createComparisonValue(s, targetSaturation, l, targetLuma, swatch.getPopulation(), maxPopulation, opts);\n            if (max === null || value > maxValue) {\n                max = swatch;\n                maxValue = value;\n            }\n        }\n    });\n    return max;\n}\nfunction _generateVariationColors(swatches, maxPopulation, opts) {\n    var palette = {\n        Vibrant: null,\n        DarkVibrant: null,\n        LightVibrant: null,\n        Muted: null,\n        DarkMuted: null,\n        LightMuted: null\n    };\n    // mVibrantSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.Vibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mLightVibrantSwatch = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.LightVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mDarkVibrantSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\n    palette.DarkVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\n    // mMutedSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.Muted = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    // mLightMutedColor = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.LightMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    // mDarkMutedSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\n    palette.DarkMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\n    return palette;\n}\nfunction _generateEmptySwatches(palette, maxPopulation, opts) {\n    if (!palette.Vibrant && !palette.DarkVibrant && !palette.LightVibrant) {\n        if (!palette.DarkVibrant && palette.DarkMuted) {\n            var _a = palette.DarkMuted.getHsl(), h = _a[0], s = _a[1], l = _a[2];\n            l = opts.targetDarkLuma;\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n        }\n        if (!palette.LightVibrant && palette.LightMuted) {\n            var _b = palette.LightMuted.getHsl(), h = _b[0], s = _b[1], l = _b[2];\n            l = opts.targetDarkLuma;\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n        }\n    }\n    if (!palette.Vibrant && palette.DarkVibrant) {\n        var _c = palette.DarkVibrant.getHsl(), h = _c[0], s = _c[1], l = _c[2];\n        l = opts.targetNormalLuma;\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    else if (!palette.Vibrant && palette.LightVibrant) {\n        var _d = palette.LightVibrant.getHsl(), h = _d[0], s = _d[1], l = _d[2];\n        l = opts.targetNormalLuma;\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.DarkVibrant && palette.Vibrant) {\n        var _e = palette.Vibrant.getHsl(), h = _e[0], s = _e[1], l = _e[2];\n        l = opts.targetDarkLuma;\n        palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.LightVibrant && palette.Vibrant) {\n        var _f = palette.Vibrant.getHsl(), h = _f[0], s = _f[1], l = _f[2];\n        l = opts.targetLightLuma;\n        palette.LightVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.Muted && palette.Vibrant) {\n        var _g = palette.Vibrant.getHsl(), h = _g[0], s = _g[1], l = _g[2];\n        l = opts.targetMutesSaturation;\n        palette.Muted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.DarkMuted && palette.DarkVibrant) {\n        var _h = palette.DarkVibrant.getHsl(), h = _h[0], s = _h[1], l = _h[2];\n        l = opts.targetMutesSaturation;\n        palette.DarkMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n    if (!palette.LightMuted && palette.LightVibrant) {\n        var _j = palette.LightVibrant.getHsl(), h = _j[0], s = _j[1], l = _j[2];\n        l = opts.targetMutesSaturation;\n        palette.LightMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\n    }\n}\nvar DefaultGenerator = function (swatches, opts) {\n    opts = Object.assign({}, DefaultOpts, opts);\n    var maxPopulation = _findMaxPopulation(swatches);\n    var palette = _generateVariationColors(swatches, maxPopulation, opts);\n    _generateEmptySwatches(palette, maxPopulation, opts);\n    return palette;\n};\nexports.default = DefaultGenerator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar image_1 = require(\"@vibrant/image\");\nvar Stage = /** @class */ (function () {\n    function Stage(pipeline) {\n        this.pipeline = pipeline;\n        this._map = {};\n    }\n    Stage.prototype.names = function () {\n        return Object.keys(this._map);\n    };\n    Stage.prototype.has = function (name) {\n        return !!this._map[name];\n    };\n    Stage.prototype.get = function (name) {\n        return this._map[name];\n    };\n    Stage.prototype.register = function (name, stageFn) {\n        this._map[name] = stageFn;\n        return this.pipeline;\n    };\n    return Stage;\n}());\nexports.Stage = Stage;\nvar BasicPipeline = /** @class */ (function () {\n    function BasicPipeline() {\n        this.filter = new Stage(this);\n        this.quantizer = new Stage(this);\n        this.generator = new Stage(this);\n    }\n    BasicPipeline.prototype._buildProcessTasks = function (_a) {\n        var _this = this;\n        var filters = _a.filters, quantizer = _a.quantizer, generators = _a.generators;\n        // Support wildcard for generators\n        if (generators.length === 1 && generators[0] === '*') {\n            generators = this.generator.names();\n        }\n        return {\n            filters: filters.map(function (f) { return createTask(_this.filter, f); }),\n            quantizer: createTask(this.quantizer, quantizer),\n            generators: generators.map(function (g) { return createTask(_this.generator, g); })\n        };\n        function createTask(stage, o) {\n            var name;\n            var options;\n            if (typeof o === 'string') {\n                name = o;\n            }\n            else {\n                name = o.name;\n                options = o.options;\n            }\n            return {\n                name: name,\n                fn: stage.get(name),\n                options: options\n            };\n        }\n    };\n    BasicPipeline.prototype.process = function (imageData, opts) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, filters, quantizer, generators, imageFilterData, colors, palettes;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this._buildProcessTasks(opts), filters = _a.filters, quantizer = _a.quantizer, generators = _a.generators;\n                        return [4 /*yield*/, this._filterColors(filters, imageData)];\n                    case 1:\n                        imageFilterData = _b.sent();\n                        return [4 /*yield*/, this._generateColors(quantizer, imageFilterData)];\n                    case 2:\n                        colors = _b.sent();\n                        return [4 /*yield*/, this._generatePalettes(generators, colors)];\n                    case 3:\n                        palettes = _b.sent();\n                        return [2 /*return*/, {\n                                colors: colors,\n                                palettes: palettes\n                            }];\n                }\n            });\n        });\n    };\n    BasicPipeline.prototype._filterColors = function (filters, imageData) {\n        return Promise.resolve(image_1.applyFilters(imageData, filters.map(function (_a) {\n            var fn = _a.fn;\n            return fn;\n        })));\n    };\n    BasicPipeline.prototype._generateColors = function (quantizer, imageData) {\n        return Promise.resolve(quantizer.fn(imageData.data, quantizer.options));\n    };\n    BasicPipeline.prototype._generatePalettes = function (generators, colors) {\n        return __awaiter(this, void 0, void 0, function () {\n            var promiseArr;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(generators.map(function (_a) {\n                            var fn = _a.fn, options = _a.options;\n                            return Promise.resolve(fn(colors, options));\n                        }))\n                        // Map the values to the expected name\n                    ];\n                    case 1:\n                        promiseArr = _a.sent();\n                        // Map the values to the expected name\n                        return [2 /*return*/, Promise.resolve(promiseArr.reduce(function (promises, promiseVal, i) {\n                                promises[generators[i].name] = promiseVal;\n                                return promises;\n                            }, {}))];\n                }\n            });\n        });\n    };\n    return BasicPipeline;\n}());\nexports.BasicPipeline = BasicPipeline;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ImageBase = /** @class */ (function () {\n    function ImageBase() {\n    }\n    ImageBase.prototype.scaleDown = function (opts) {\n        var width = this.getWidth();\n        var height = this.getHeight();\n        var ratio = 1;\n        if (opts.maxDimension > 0) {\n            var maxSide = Math.max(width, height);\n            if (maxSide > opts.maxDimension)\n                ratio = opts.maxDimension / maxSide;\n        }\n        else {\n            ratio = 1 / opts.quality;\n        }\n        if (ratio < 1)\n            this.resize(width * ratio, height * ratio, ratio);\n    };\n    return ImageBase;\n}());\nexports.ImageBase = ImageBase;\nfunction applyFilters(imageData, filters) {\n    if (filters.length > 0) {\n        var pixels = imageData.data;\n        var n = pixels.length / 4;\n        var offset = void 0;\n        var r = void 0;\n        var g = void 0;\n        var b = void 0;\n        var a = void 0;\n        for (var i = 0; i < n; i++) {\n            offset = i * 4;\n            r = pixels[offset + 0];\n            g = pixels[offset + 1];\n            b = pixels[offset + 2];\n            a = pixels[offset + 3];\n            // Mark ignored color\n            for (var j = 0; j < filters.length; j++) {\n                if (!filters[j](r, g, b, a)) {\n                    pixels[offset + 3] = 0;\n                    break;\n                }\n            }\n        }\n    }\n    return imageData;\n}\nexports.applyFilters = applyFilters;\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}